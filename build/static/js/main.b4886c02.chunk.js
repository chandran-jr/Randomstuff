(this.webpackJsonpsnappy=this.webpackJsonpsnappy||[]).push([[0],{77:function(e,t,c){},78:function(e,t,c){},84:function(e,t,c){},93:function(e,t,c){},94:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(29),i=c.n(s),r=(c(77),c(78),c(56)),o=c.n(r),l=c(47),j=c.n(l),u=c(12),d=c(38),b=Object(d.b)({name:"camera",initialState:{cameraImage:"null"},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),m=b.actions,p=m.setCameraImage,h=m.resetCameraImage,O=function(e){return e.camera.cameraImage},f=b.reducer,g=c(10),x=(c(84),c(4)),v={width:250,height:400,facingMode:"user"};var _=function(){var e=Object(a.useRef)(null),t=Object(u.b)(),c=Object(g.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(p(a)),c.push("/preview")}),[t,e,c]);return Object(x.jsxs)("div",{className:"webcamCapture",children:[Object(x.jsx)(o.a,{audio:!1,height:v.height,ref:e,screenshotFormat:"image/jpeg",width:v.width,videoConstraints:v}),Object(x.jsx)(j.a,{className:"webcamCapture__button",onClick:n,fontSize:"large"})]})},w=c(31),N=c(58),I=c.n(N),C=c(59),y=c.n(C),S=c(60),k=c.n(S),P=c(61),A=c.n(P),U=c(62),z=c.n(U),B=c(63),E=c.n(B),L=c(64),R=c.n(L),T=c(65),D=c.n(T),K=c(66),V=c.n(K),W=c(115),q=c(35),F=q.a.initializeApp({apiKey:"AIzaSyA3aafoOMA22_8l9si_utqzAH9cY6K0iPA",authDomain:"snappy-2152b.firebaseapp.com",projectId:"snappy-2152b",storageBucket:"snappy-2152b.appspot.com",messagingSenderId:"219406518478",appId:"1:219406518478:web:7945acb73c5c8f2aa5e89f"}).firestore(),G=q.a.auth(),M=q.a.storage(),J=new q.a.auth.GoogleAuthProvider,Q=(c(93),Object(d.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}})),Z=Q.actions,H=Z.login,X=Z.logout,Y=Z.selectImage,$=(Z.resetImage,function(e){return e.app.user}),ee=function(e){return e.app.selectedImage},te=Q.reducer;var ce=function(){var e=Object(u.c)(O),t=Object(g.f)(),c=Object(u.b)(),n=Object(u.c)($);return Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]),Object(x.jsxs)("div",{className:"preview",children:[Object(x.jsx)(I.a,{className:"preview__close",onClick:function(){c(h())}}),Object(x.jsxs)("div",{className:"preview__toolbarRight",children:[Object(x.jsx)(y.a,{}),Object(x.jsx)(k.a,{}),Object(x.jsx)(A.a,{}),Object(x.jsx)(z.a,{}),Object(x.jsx)(E.a,{}),Object(x.jsx)(R.a,{}),Object(x.jsx)(D.a,{})]}),Object(x.jsx)("img",{src:e,alt:""}),Object(x.jsxs)("div",{onClick:function(){var c=Object(W.a)();M.ref("posts/".concat(c)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){M.ref("posts").child(c).getDownloadURL().then((function(e){F.collection("posts").add({imageUrl:e,username:n.username,profilePic:n.profilePic,read:!1,timestamp:q.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview__footer",children:[Object(x.jsx)("h2",{children:"Send"}),Object(x.jsx)(V.a,{fontSize:"small",className:"preview__sendIcon"})]})]})},ae=c(34),ne=c(116),se=c(68),ie=c.n(se),re=(c(94),c(67)),oe=c.n(re),le=c(70);c(95);var je=function(e){var t=e.id,c=e.username,a=e.timestamp,n=e.imageUrl,s=e.read,i=e.profilePic,r=Object(u.b)(),o=Object(g.f)();return Object(x.jsxs)("div",{onClick:function(){s||(r(Y(n)),F.collection("posts").doc(t).set({read:!0},{merge:!0}),o.push("/chats/view"))},className:"chat",children:[Object(x.jsx)(ne.a,{src:i}),Object(x.jsxs)("div",{className:"chat__info",children:[Object(x.jsx)("h4",{children:c}),Object(x.jsxs)("p",{children:[" ",!s&&"Tap to view ~",Object(x.jsx)(le.a,{date:new Date(null===a||void 0===a?void 0:a.toDate()).toUTCString()})," "]})]}),!s&&Object(x.jsx)(oe.a,{className:"chat__stopicon"})]})};var ue=function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),c=t[0],n=t[1],s=Object(u.c)($),i=Object(u.b)(),r=Object(g.f)();return Object(a.useEffect)((function(){F.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(x.jsxs)("div",{className:"chats",children:[Object(x.jsxs)("div",{className:"chats__header",children:[Object(x.jsx)(ne.a,{src:s.profilePic,onClick:function(){return G.signOut()},className:"chats__avatar"}),Object(x.jsxs)("div",{className:"chats__searchbar",children:[Object(x.jsx)(ie.a,{className:"chats__searchIcon"}),Object(x.jsx)("input",{type:"text",placeholder:"Search"})]})]}),Object(x.jsx)("div",{className:"chats__posts",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,n=c.username,s=c.timestamp,i=c.imageUrl,r=c.read;return Object(x.jsx)(je,{id:t,username:n,timestamp:s,imageUrl:i,read:r,profilePic:a},t)}))}),Object(x.jsx)(j.a,{className:"chats__takePic",onClick:function(){i(h()),r.replace("/")},fontSize:"large"})]})},de=(c(96),c(69));var be=function(){var e=Object(u.c)(ee),t=Object(g.f)();Object(a.useEffect)((function(){e||c()}));var c=function(){t.replace("/chats")};return Object(x.jsxs)("div",{className:"chatview",children:[Object(x.jsx)("img",{src:e,onClick:c,alt:""}),Object(x.jsx)("div",{className:"chatview__timer",children:Object(x.jsx)(de.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var t=e.remainingTime;return 0===t&&c(),t}})})]})},me=c(114);c(97);var pe=function(){var e=Object(u.b)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"login__container",children:[Object(x.jsx)("h2",{children:"Snappy"}),Object(x.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSlLapujKfVQ8gZsoPZBLVK2sxuCampXG9VtQ&usqp=CAU",alt:""}),Object(x.jsx)(me.a,{variant:"outlined",onClick:function(){G.signInWithPopup(J).then((function(t){e(H({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){alert(e.message)}))},children:"Sign In"})]})})};var he=function(){var e=Object(u.c)($),t=Object(u.b)();return Object(a.useEffect)((function(){G.onAuthStateChanged((function(e){t(e?H({username:e.username,profilePic:e.photoURL,id:e.uid}):X())}))})),Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(w.a,{children:e?Object(x.jsx)("div",{className:"app__body",children:Object(x.jsx)("div",{className:"app__bodybg",children:Object(x.jsxs)(g.c,{children:[Object(x.jsx)(g.a,{exact:!0,path:"/",children:Object(x.jsx)(_,{})}),Object(x.jsx)(g.a,{exact:!0,path:"/chats",children:Object(x.jsx)(ue,{})}),Object(x.jsx)(g.a,{path:"/chats/view",children:Object(x.jsx)(be,{})}),Object(x.jsx)(g.a,{path:"/preview",children:Object(x.jsx)(ce,{})})]})})}):Object(x.jsx)(pe,{})})})},Oe=Object(d.a)({reducer:{app:te,camera:f}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(u.a,{store:Oe,children:Object(x.jsx)(he,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[98,1,2]]]);
//# sourceMappingURL=main.b4886c02.chunk.js.map